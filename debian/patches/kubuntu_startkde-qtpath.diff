From: Debian/Kubuntu Qt/KDE Maintainers <debian-qt-kde@lists.debian.org>
Date: Wed, 6 Apr 2016 23:07:54 +0200
Subject: kubuntu_startkde-qtpath

===================================================================
---
 startkde/CMakeLists.txt | 2 ++
 startkde/startkde.cmake | 4 +++-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/startkde/CMakeLists.txt b/startkde/CMakeLists.txt
index fe29f57..2cb1102 100644
--- a/startkde/CMakeLists.txt
+++ b/startkde/CMakeLists.txt
@@ -8,6 +8,8 @@ if(NOT CMAKE_INSTALL_PREFIX STREQUAL "/usr")
     set(EXPORT_XCURSOR_PATH "XCURSOR_PATH=${CMAKE_INSTALL_PREFIX}/share/icons:$XCURSOR_PATH\":~/.icons:/usr/share/icons:/usr/share/pixmaps:/usr/X11R6/lib/X11/icons\"; export XCURSOR_PATH")
 endif()
 
+execute_process( COMMAND dpkg-architecture -qDEB_HOST_MULTIARCH OUTPUT_VARIABLE DEB_HOST_MULTIARCH OUTPUT_STRIP_TRAILING_WHITESPACE)
+
 configure_file(startkde.cmake ${CMAKE_CURRENT_BINARY_DIR}/startkde  @ONLY)
 configure_file(startplasmacompositor.cmake ${CMAKE_CURRENT_BINARY_DIR}/startplasmacompositor  @ONLY)
 configure_file(startplasma.cmake ${CMAKE_CURRENT_BINARY_DIR}/startplasma  @ONLY)
diff --git a/startkde/startkde.cmake b/startkde/startkde.cmake
index 2f67bdc..ea47fb3 100644
--- a/startkde/startkde.cmake
+++ b/startkde/startkde.cmake
@@ -3,6 +3,8 @@
 #  DEFAULT KDE STARTUP SCRIPT ( @PROJECT_VERSION@ )
 #
 
+QTPATHS=/usr/lib/@DEB_HOST_MULTIARCH@/qt5/bin/qtpaths
+
 # When the X server dies we get a HUP signal from xinit. We must ignore it
 # because we still need to do some cleanup.
 trap 'echo GOT SIGHUP' HUP
@@ -154,7 +156,7 @@ fi
 # For anything else (that doesn't set env vars, or that needs a window manager),
 # better use the Autostart folder.
 
-scriptpath=`qtpaths --locate-dirs GenericConfigLocation plasma-workspace | tr ':' '\n'`
+scriptpath=`${QTPATHS} --locate-dirs GenericConfigLocation plasma-workspace | tr ':' '\n'`
 
 # Add /env/ to the directory to locate the scripts to be sourced
 for prefix in `echo $scriptpath`; do
